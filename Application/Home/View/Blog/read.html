<extend name="Public:blog"/><block name="post_title"><div class="container"><div class="postTitle text-center"><h2 id="postTitle">文章标题</h2><span id="postAuthor">佚名</span></div></div></block><block name="post_content"><div class="post-content"id="postContent"></div></block><block name="post_foot"><div class="reprint"><a id="postLink"href="#"target="_blank">转载：WuGN</a></div><div class="postDesc text-right"><time id="postDate"><time></div><div class="flippage text-center">上一篇：<a id="preFlip"href="#"title="无">无</a>&nbsp;|&nbsp;下一篇：<a id="nextFlip"href="#"title="无">无</a></div></block><block name="script"><script>(function(){"use strict";var init=function(){bindEvent();loadBlog();},bindEvent=function(){$("input[name='q']").keydown(function(e){if(e.keyCode==13||e.keyCode==108){window.location.href="__ROOT__/blog/index?q="+this.value;this.value="";return false}})},loadBlog=(url)=>{var url="__APP__/Blog/loadBlog/id/{$data.id}";$.ajax({url:url,data:{},type:"POST",cache:false,dataType:"JSON",async:false,beforeSend:function(){ajaxLoading()},success:function(data){fillTable(data);swal.close()},error:function(){ajaxError()},complete:function(){}});},fillTable=(data)=>{$("#postTitle").text(data.data.post_title);$("#postAuthor").text("作者："+data.data.post_author||"佚名");$("#postContent").html(data.data.post_content);$("#postLink").attr("href",data.data.post_link||"#");$("#postLink").text("转载："+data.data.post_from||"WuGN");$("#postDate").text(data.data.post_date);$("#preFlip").attr("href","__ROOT__/blog/"+data.flippage.previous.id);$("#preFlip").attr("title",data.flippage.previous.post_title);$("#preFlip").text(data.flippage.previous.post_title_cut);$("#nextFlip").attr("href","__ROOT__/blog/"+data.flippage.next.id);$("#nextFlip").attr("title",data.flippage.next.post_title);$("#nextFlip").text(data.flippage.next.post_title_cut);},ajaxLoading=()=>{swal({title:"获取数据中...",imageUrl:"{$Think.config.WUGN.CDN}/img/ajax-loading.gif",allowOutsideClick:false,allowEscapeKey:false,showConfirmButton:false});},ajaxError=()=>{swal({type:"error",title:"ajax 加载失败",allowOutsideClick:false,allowEnterKey:false,confirmButtonText:"确认",animation:false,customClass:"animated wobble"});};$(function(){init();});})();</script></block>
